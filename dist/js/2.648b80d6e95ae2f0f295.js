(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{195:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=m(n(79)),i=m(n(185)),r=m(n(186)),l=m(n(187)),o=m(n(191)),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(80),n(188),n(189),n(190),n(192);var c=m(n(0)),d=m(n(7)),u=m(n(78)),f=n(50),g=m(n(197)),h=m(n(198));function m(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function I(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=["myCreatorList","myHandlerList","doneList"],E=[new h.default,new h.default,new h.default],w=o.default.Item,b=10;function M(e,t,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var a=arguments[4],i=E[n];a&&(i.currentIndex=0),u.default.sendData({url:f.workflowUrl,code:"workflow",method:v[n],message:{start:i.currentIndex*b,size:b},successFunc:function(n){var r=n.workflow;a&&i.clear();for(var l=0;l<r.length;l++)i.pushData(r[l].iid,r[l]);e.setState({dataSource:e.state.dataSource.cloneWithRows(i.datas,i.keys),isLoading:!1,height:t})},errorFunc:function(e){},isLogin:!1,encode:!0})}var x=function(e){function t(e){p(this,t);var n=y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.onEndReached=function(e){if(!n.state.isLoading||n.state.hasMore){n.setState({isLoading:!0});var t=n.props.tabIndex,a=document.documentElement.clientHeight-d.default.findDOMNode(n.lv).parentNode.offsetTop,i=E[t];i.addPageIndex(),setTimeout(function(){M(n,a,t,i.currentIndex,!1)},500)}};var a=new l.default.DataSource({getRowData:function(e,t,n){return e[n]},rowHasChanged:function(e,t){return e!==t}});return n.state={dataSource:a,isLoading:!0,height:document.documentElement.clientHeight},n}return I(t,c.default.Component),s(t,[{key:"componentDidMount",value:function(){var e=this,t=document.documentElement.clientHeight-d.default.findDOMNode(this.lv).parentNode.offsetTop,n=this.props.tabIndex;setTimeout(function(){M(e,t,n,0,!0)},600)}},{key:"render",value:function(){var e=this;return c.default.createElement(l.default,{ref:function(t){return e.lv=t},dataSource:this.state.dataSource,renderFooter:function(){return c.default.createElement("div",{style:{padding:30,textAlign:"center"}},e.state.isLoading?"正在加载":"加载完成")},renderRow:function(t,n,a){var i=E[e.props.tabIndex].getData(a);return i?((new Date).setTime(i.modifytime),c.default.createElement("div",{key:a,style:{padding:"0 15px"},className:"deal"},c.default.createElement("div",{style:{fontSize:16,border:"1px solid #94B5FF",borderRadius:6,marginBottom:12,padding:"12px 16px"},onClick:function(e){e.preventDefault(),WorkHelper.openApp({appCode:"aqyhsb",param:{startType:"4",url:f.workflowUrl+"/manager/_wfpreview.html?instanceId="+i.iid+"&wid="+i.wid},success:function(e){},fail:function(e){alert(e)}})}},c.default.createElement("h1",null,i.title),c.default.createElement("p",null,c.default.createElement("span",{className:"type"},i.name)),c.default.createElement("div",{className:"info"},c.default.createElement("span",{className:"icon iconfont"},""),i.username),c.default.createElement("div",{className:"date"},c.default.createElement("span",{className:"icon iconfont"},""),u.default.formatDateString(i.createtime)),c.default.createElement("div",{className:"clearfix"})))):c.default.createElement("div",null,"error")},style:{height:this.state.height,overflow:"auto"},pageSize:4,scrollRenderAheadDistance:500,onEndReached:this.onEndReached,onEndReachedThreshold:10})}}]),t}(),N=[{title:"我发起"},{title:"我处理"},{title:"已归档"}],C=function(e){function t(e){p(this,t);var n=y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.saveRefs=function(e,t){n.myTabs[e]=t},n.onSelect=function(e){if(n.setState({visible:!1,selected:e.props.value}),"refresh"==e.props.value){var t=n.myTabs[n.state.currentIndex],a=n.state.currentIndex,i=document.documentElement.clientHeight-d.default.findDOMNode(t.lv).parentNode.offsetTop;setTimeout(function(){M(t,i,a,0,!0)},600)}},n.handleVisibleChange=function(e){n.setState({visible:e})},n.state={currentIndex:0,height:document.documentElement.clientHeight,visible:!1,selected:""},n.myTabs=[],n}return I(t,c.default.Component),s(t,[{key:"render",value:function(){var e=this;return c.default.createElement("div",null,c.default.createElement(i.default,{mode:"light",icon:c.default.createElement(r.default,{type:"left"}),onLeftClick:function(){return WorkHelper.closeApp({success:function(e){},fail:function(e){}})},rightContent:c.default.createElement(o.default,{overlayClassName:"fortest",overlayStyle:{color:"currentColor"},visible:this.state.visible,overlay:[c.default.createElement(w,{key:"1",value:"refresh",icon:c.default.createElement("img",{src:g.default,className:"am-icon am-icon-xs",alt:""}),"data-seed":"logId"},"刷新")],align:{overflow:{adjustY:0,adjustX:0},offset:[-10,0]},onVisibleChange:this.handleVisibleChange,onSelect:this.onSelect},c.default.createElement("div",{style:{height:"100%",padding:"0 15px",marginRight:"-15px",display:"flex",alignItems:"center"}},c.default.createElement(r.default,{type:"ellipsis"})))},"查询"),c.default.createElement(a.default,{tabs:N,initialPage:0,onChange:function(t,n){e.setState({currentIndex:n})},onTabClick:function(e,t){}},c.default.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:this.state.height}},c.default.createElement("div",{style:{display:0==this.state.currentIndex?"block":"none",width:"100%",height:this.state.height}},c.default.createElement(x,{tabIndex:"0",owner:this.props.owner,ref:function(t){e.saveRefs(0,t)}}))),c.default.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:this.state.height}},c.default.createElement("div",{style:{display:1==this.state.currentIndex?"block":"none",width:"100%",height:this.state.height}},c.default.createElement(x,{tabIndex:"1",owner:this.props.owner,ref:function(t){e.saveRefs(1,t)}}))),c.default.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:this.state.height}},c.default.createElement("div",{style:{display:2==this.state.currentIndex?"block":"none",width:"100%",height:this.state.height}},c.default.createElement(x,{tabIndex:"2",owner:this.props.owner,ref:function(t){e.saveRefs(2,t)}})))))}}]),t}();t.default=C},197:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjI0cHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgdmVyc2lvbj0iMS4xIiBmaWxsPSIjMDAwMDAwIj4KICA8ZyBpZD0ic3VyZmFjZTkxOTI3MiI+CiAgICA8cGF0aCBzdHlsZT0iIHN0cm9rZTpub25lO2ZpbGwtcnVsZTpub256ZXJvO2ZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTsiIGQ9Ik0gNy4xNjAxNTYgMyBMIDguNzYxNzE5IDUgTCAxOCA1IEMgMTguNTUwNzgxIDUgMTkgNS40NDkyMTkgMTkgNiBMIDE5IDE1IEwgMTYgMTUgTCAyMCAyMCBMIDI0IDE1IEwgMjEgMTUgTCAyMSA2IEMgMjEgNC4zNDc2NTYgMTkuNjUyMzQ0IDMgMTggMyBaIE0gNCA0IEwgMCA5IEwgMyA5IEwgMyAxOCBDIDMgMTkuNjUyMzQ0IDQuMzQ3NjU2IDIxIDYgMjEgTCAxNi44Mzk4NDQgMjEgTCAxNS4yMzgyODEgMTkgTCA2IDE5IEMgNS40NDkyMTkgMTkgNSAxOC41NTA3ODEgNSAxOCBMIDUgOSBMIDggOSBaIE0gNCA0ICIvPgogIDwvZz4KPC9zdmc+Cg=="},198:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return a});class a{constructor(){this.clear()}clear(){this.datas={},this.keys=[],this.currentIndex=0}pushData(e,t){this.datas[e]=t,this.keys.push(e)}getData(e){return this.datas[e]}addPageIndex(){this.currentIndex++}}}}]);