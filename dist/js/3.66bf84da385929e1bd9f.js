(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{194:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=p(n(185)),o=p(n(186)),i=p(n(187)),r=p(n(191)),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(188),n(189),n(190),n(192);var c=p(n(0)),u=p(n(7)),s=p(n(197)),d=p(n(78)),f=n(50),g=p(n(198));function p(e){return e&&e.__esModule?e:{default:e}}var m=10,h=new g.default,y=null,I=r.default.Item,v=null;function M(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var n=arguments[3];n&&(h.currentIndex=0),d.default.sendData({url:f.workflowUrl,code:"workflow",method:"todoList",message:{start:h.currentIndex*m,size:m},successFunc:function(a){var o=a.process;n&&h.clear();for(var i=0;i<o.length;i++)h.pushData(o[i].id,o[i]);e.setState({dataSource:e.state.dataSource.cloneWithRows(h.datas,h.keys),isLoading:!1,height:t}),y.setState({numTODO:o.length})},errorFunc:function(e){},isLogin:!1,encode:!0})}function w(){WorkHelper.getLocalData({appCode:"aqyhsb",key:"workflowAction",success:function(e){if(e.retData){var t=document.documentElement.clientHeight-u.default.findDOMNode(v.lv).parentNode.offsetTop;setTimeout(function(){M(v,t,0,!0)},600),WorkHelper.saveLocalData({appCode:"aqyhsb",key:"workflowAction",value:"",success:function(e){},fail:function(e){alert(JSON.stringify(e))}})}setTimeout(w,500)},fail:function(e){alert(JSON.stringify(e))}})}var E=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.onEndReached=function(e){if(!n.state.isLoading||n.state.hasMore){n.setState({isLoading:!0});var t=document.documentElement.clientHeight-u.default.findDOMNode(n.lv).parentNode.offsetTop;h.addPageIndex(),setTimeout(function(){M(n,t,h.currentIndex,!1)},500)}},n.onSelect=function(e){var t=n;if(n.setState({visible:!1,selected:e.props.value}),"refresh"==e.props.value){var a=document.documentElement.clientHeight-u.default.findDOMNode(t.lv).parentNode.offsetTop;setTimeout(function(){M(t,a,0,!0)},600)}},n.handleVisibleChange=function(e){n.setState({visible:e})};var a=new i.default.DataSource({getRowData:function(e,t,n){return e[n]},rowHasChanged:function(e,t){return e!==t}});return n.state={dataSource:a,isLoading:!0,height:3*document.documentElement.clientHeight/4,visible:!1,selected:""},y=e.owner,v=n,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),l(t,[{key:"componentDidMount",value:function(){var e=this,t=document.documentElement.clientHeight-u.default.findDOMNode(this.lv).parentNode.offsetTop;setTimeout(function(){M(e,t,e.props.tabIndex,!0)},600),setTimeout(w,500)}},{key:"render",value:function(){var e=this;return c.default.createElement("div",null,c.default.createElement(a.default,{mode:"light",icon:c.default.createElement(o.default,{type:"left"}),onLeftClick:function(){return WorkHelper.closeApp({success:function(e){},fail:function(e){}})},rightContent:c.default.createElement(r.default,{overlayClassName:"fortest",overlayStyle:{color:"currentColor"},visible:this.state.visible,overlay:[c.default.createElement(I,{key:"1",value:"refresh",icon:c.default.createElement("img",{src:s.default,className:"am-icon am-icon-xs",alt:""}),"data-seed":"logId"},"刷新")],align:{overflow:{adjustY:0,adjustX:0},offset:[-10,0]},onVisibleChange:this.handleVisibleChange,onSelect:this.onSelect},c.default.createElement("div",{style:{height:"100%",padding:"0 15px",marginRight:"-15px",display:"flex",alignItems:"center"}},c.default.createElement(o.default,{type:"ellipsis"})))},"待办"),c.default.createElement(i.default,{ref:function(t){return e.lv=t},dataSource:this.state.dataSource,renderFooter:function(){return c.default.createElement("div",{style:{padding:30,textAlign:"center"}},e.state.isLoading?"正在加载":"加载完成")},renderRow:function(e,t,n){var a=h.getData(n);return a?c.default.createElement("div",{key:n,style:{padding:"0 15px"},className:"deal"},c.default.createElement("div",{style:{fontSize:16,border:"1px solid #94B5FF",borderRadius:6,marginBottom:12,padding:"12px 16px"},onClick:function(e){e.preventDefault(),WorkHelper.openApp({appCode:"aqyhsb",param:{startType:"4",url:f.workflowUrl+"manager/_wfhandler.html?nid="+a.id+"&wid="+a.workflow},success:function(e){},fail:function(e){alert(e)}})}},c.default.createElement("h1",null,a.title?a.title:"[草稿]"),c.default.createElement("p",null,c.default.createElement("span",{className:"type"},a.workflowName)),c.default.createElement("div",{className:"info"},c.default.createElement("span",{className:"icon iconfont"},""),a.username),c.default.createElement("div",{className:"date"},c.default.createElement("span",{className:"icon iconfont"},""),d.default.formatDateString(a.modifytime)),c.default.createElement("div",{className:"clearfix"}))):c.default.createElement("div",null,"error")},style:{height:this.state.height,overflow:"auto"},pageSize:4,scrollRenderAheadDistance:500,onEndReached:this.onEndReached,onEndReachedThreshold:10}))}}]),t}();t.default=E},197:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjI0cHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgdmVyc2lvbj0iMS4xIiBmaWxsPSIjMDAwMDAwIj4KICA8ZyBpZD0ic3VyZmFjZTkxOTI3MiI+CiAgICA8cGF0aCBzdHlsZT0iIHN0cm9rZTpub25lO2ZpbGwtcnVsZTpub256ZXJvO2ZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTsiIGQ9Ik0gNy4xNjAxNTYgMyBMIDguNzYxNzE5IDUgTCAxOCA1IEMgMTguNTUwNzgxIDUgMTkgNS40NDkyMTkgMTkgNiBMIDE5IDE1IEwgMTYgMTUgTCAyMCAyMCBMIDI0IDE1IEwgMjEgMTUgTCAyMSA2IEMgMjEgNC4zNDc2NTYgMTkuNjUyMzQ0IDMgMTggMyBaIE0gNCA0IEwgMCA5IEwgMyA5IEwgMyAxOCBDIDMgMTkuNjUyMzQ0IDQuMzQ3NjU2IDIxIDYgMjEgTCAxNi44Mzk4NDQgMjEgTCAxNS4yMzgyODEgMTkgTCA2IDE5IEMgNS40NDkyMTkgMTkgNSAxOC41NTA3ODEgNSAxOCBMIDUgOSBMIDggOSBaIE0gNCA0ICIvPgogIDwvZz4KPC9zdmc+Cg=="},198:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return a});class a{constructor(){this.clear()}clear(){this.datas={},this.keys=[],this.currentIndex=0}pushData(e,t){this.datas[e]=t,this.keys.push(e)}getData(e){return this.datas[e]}addPageIndex(){this.currentIndex++}}}}]);