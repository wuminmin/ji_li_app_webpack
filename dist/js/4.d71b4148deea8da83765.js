(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{434:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=d(n(426)),a=d(n(427)),r=d(n(428)),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(429),n(430),n(431);var s=d(n(0)),u=d(n(8)),l=d(n(446)),c=n(445);function d(e){return e&&e.__esModule?e:{default:e}}var p={},f=[];var h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),o=new r.default.DataSource({getRowData:function(e,t,n){return e[n]},rowHasChanged:function(e,t){return e!==t}});return n.state={dataSource:o,isLoading:!0,height:3*document.documentElement.clientHeight/4},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){var e=this,t=document.documentElement.clientHeight-u.default.findDOMNode(this.lv).parentNode.offsetTop;setTimeout((function(){!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;l.default.sendData({url:c.workflowUrl,code:"workflow",method:"list",message:null,successFunc:function(o){for(var a=o.workflow,r=0;r<a.length;r++){var i="T"+n+" - R"+r;f.push(i),p[i]=a[r]}e.setState({dataSource:e.state.dataSource.cloneWithRows(p,f),isLoading:!1,height:t})},errorFunc:function(e){},isLogin:!1,encode:!0})}(e,t,e.props.tabIndex)}),600)}},{key:"render",value:function(){var e=this;return s.default.createElement("div",null,s.default.createElement(o.default,{mode:"light",icon:s.default.createElement(a.default,{type:"left"}),onLeftClick:function(){return WorkHelper.closeApp({success:function(e){},fail:function(e){}})}},"发起流程"),s.default.createElement(r.default,{ref:function(t){return e.lv=t},dataSource:this.state.dataSource,renderRow:function(e,t,n){var o=p[n];return s.default.createElement("div",{key:n,style:{padding:"0 15px"}},s.default.createElement("div",{style:{fontSize:16,border:"1px solid #94B5FF",borderRadius:6,marginBottom:12,padding:"12px 16px"},onClick:function(e){e.preventDefault(),WorkHelper.openApp({appCode:"aqyhsb",param:{startType:"4",url:c.workflowUrl+"manager/_wfstart.html?id="+o.id},success:function(e){},fail:function(e){alert(e)}})}},o.name))},renderSeparator:function(e,t){return s.default.createElement("div",{key:e+"-"+t,style:{backgroundColor:"#F5F5F9",height:8,borderTop:"1px solid #ECECED",borderBottom:"1px solid #ECECED"}})},style:{height:this.state.height,overflow:"auto"},pageSize:4,onEndReachedThreshold:10}))}}]),t}(s.default.Component);t.default=h},445:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="https://it.jisu8.cn:9999/workflowManager/";t.workflowUrl=o,t.ssoUrl="http://localhost:8101/sso/"},446:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(122),i=(o=r)&&o.__esModule?o:{default:o},s=n(445);i.default.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8";var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,null,[{key:"getNext",value:function(e){var t=this.sequences[e];return null==t?(this.sequences[e]=0,0):(t++,this.sequences[e]=t,t)}},{key:"contextUrl",value:function(){var e=document.location,t=e.pathname;return e.protocol+"//"+e.host+t.substring(0,t.indexOf("/",1))+"/"}},{key:"sendData",value:function(e){try{e||(e={});var t={url:this.contextUrl(),code:!1,method:!1,message:{},successFunc:function(){},errorFunc:function(e){alert(e)},isShowloading:!1,async:!0,isLogin:!1,postType:!1,encode:!1,notShowLogin:!1,notdata:!1},n=(t=Object.assign(t,e)).code,o=t.method,a=t.message,r=t.successFunc,s=t.errorFunc,u=(t.isShowloading,t.async,t.isLogin),l=(t.postType,t.encode),c=t.notShowLogin,d=t.url,p=t.notdata,f=void 0;if(!n)throw"senddata method's code parameter can't be null."+document.location;if(!o)throw"senddata method's method parameter can't be null."+document.location;var h=this.getNext("json");a?(f=JSON.stringify(a),f=l?"data="+encodeURIComponent(f):"data="+f):f="data=",p&&(f=a);var g=u?"get.login?":"get.data?";(0,i.default)({method:"post",url:""+d+g+"s="+h+"&c="+n+"&m="+o,data:f,headers:{"Content-type":"application/x-www-form-urlencoded;charset=UTF-8"},cancelToken:!!e.cancelToken&&e.cancelToken,withCredentials:!0,timeout:6e4}).then((function(e){var t=e.data;if(0==t.r)r(t.m);else if("-999"==t.r&&"login"==t.a){if(c)return void s(null,t.r,"功能异常，请联系系统管理员 "+t.m)}else s(null,t.r,"功能异常，请联系系统管理员 "+t.m)})).catch((function(e){s(e.message)}))}catch(e){alert(e)}}},{key:"getUpdateTime",value:function(e,t,n,o,a){var r=new URLSearchParams;r.append("dateType",e),"contractedAssistant"==t?"month"==e||"day"==e?(r.append("pageType","home"),r.append("deptId",o),r.append("roleCode","yyb_head")):"hour"==e&&(r.append("pageType","home"),r.append("channelCode","home002_2"),r.append("latnId",a),r.append("deptId",o),r.append("roleCode","yyb_head")):"gzzs_bqzhsh"==t&&("month"==e||"day"==e?(r.append("pageType","home"),r.append("deptId",o),r.append("roleCode","gzzs_qdjl")):"hour"==e&&(r.append("pageType","home"),r.append("channelCode","jrfz_city"),r.append("deptId",o),r.append("roleCode","gzzs_qdjl"))),(0,i.default)({method:"post",url:s.baseCbzsUrl+"client/channelAction!getUpdateDateInTheoryFromServer.msp",data:r}).then((function(e){return 1==e.data.retCode&&e.data.retResult})).then((function(e){n(e)})).catch((function(e){alert(e.message)}))}},{key:"jumpToApp",value:function(e,t,n){appService.startApp(e,n,(function(e){}),(function(e){showAlert("失败。"+e)}))}},{key:"checkTicket",value:function(e){var t=this;try{appService.getTicket((function(n){null==n?(alert("票据为空，请重新登录！"),t.closeApp()):e(n)}),(function(e){alert(e)}))}catch(e){alert(e)}}},{key:"closeApp",value:function(){appService.closeApp((function(){}),(function(){}))}},{key:"showMask",value:function(e){alert(e)}},{key:"upLoadFile",value:function(e){var t=e.url,n=e.file,o=e.fileVal,a=e.onBeforeSend,r=e.onProgress,i=e.onError,s=e.onSuccess,u=n.name,l=n.type,c=n.lastModifiedDate,d={name:u,type:l,size:"file"==e.type?n.size:n.base64.length,lastModifiedDate:c},p={};if(!1!==a(n,d,p)){r(n,0);var f=new FormData,h=new XMLHttpRequest;n.xhr=h,Object.keys(d).forEach((function(e){f.append(e,d[e])})),"file"==e.type?f.append(o,n,u):f.append(o,n.base64),h.onreadystatechange=function(){if(4==h.readyState)if(200==h.status)try{var e=JSON.parse(h.responseText);s(n,e)}catch(e){i(n,e)}else i(n,new Error("XMLHttpRequest response status is "+h.status))},h.upload.addEventListener("progress",(function(e){if(0!=e.total){var t=100*Math.ceil(e.loaded/e.total);r(n,t)}}),!1),h.open("POST",t),Object.keys(p).forEach((function(e){h.setRequestHeader(e,p[e])})),h.send(f)}}},{key:"formatDateString",value:function(t){if(t){var n=new Date,o=t.split(" "),a=o[0].split("-");if(n.setYear(a[0]),n.setMonth(a[1]-1),n.setDate(a[2]),o.length>1){var r=o[1].split(":");n.setHours(r[0]),n.setMinutes(r[1]),r.length>2?n.setSeconds(r[2]):n.setSeconds(0)}else n.setHours(0),n.setMinutes(0),n.setSeconds(0);return n.setMilliseconds(0),[e.padding((n.getMonth()+1).toString(),2,"0"),"-",e.padding(n.getDate().toString(),2,"0")," ",e.padding(n.getHours().toString(),2,"0"),":",e.padding(n.getMinutes().toString(),2,"0")]}return""}},{key:"padding",value:function(e,t,n){var o=t-e.length;if(o>0)for(var a=0;a<o;a++)e=n+e;return e}},{key:"urlHashInfo",value:function(){var e=window.location.href,t=e.indexOf("?"),n=e.substr(t,e.length-t),o={};if(n.length>1)for(var a=n.substr(1,n.length).split("&"),r=0;r<a.length;r++){t=a[r].indexOf("=");o[a[r].substr(0,t)]=a[r].substr(t+1,a[r].length-t)}return o}}]),e}();t.default=u,u.sequences=[]}}]);