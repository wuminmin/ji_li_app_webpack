(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{438:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=g(n(426)),o=g(n(427)),r=g(n(428)),i=g(n(432)),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(429),n(430),n(431),n(433);var l=g(n(0)),c=g(n(8)),u=g(n(447)),d=g(n(446)),f=n(445),p=g(n(448));function g(e){return e&&e.__esModule?e:{default:e}}var h=new p.default,m=null,y=i.default.Item,v=null;function w(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var n=arguments[3];n&&(h.currentIndex=0),d.default.sendData({url:f.workflowUrl,code:"workflow",method:"todoList",message:{start:10*h.currentIndex,size:10},successFunc:function(a){var o=a.process;n&&h.clear();for(var r=0;r<o.length;r++)h.pushData(o[r].id,o[r]);e.setState({dataSource:e.state.dataSource.cloneWithRows(h.datas,h.keys),isLoading:!1,height:t}),m.setState({numTODO:o.length})},errorFunc:function(e){},isLogin:!1,encode:!0})}function M(){WorkHelper.getLocalData({appCode:"aqyhsb",key:"workflowAction",success:function(e){if(e.retData){var t=document.documentElement.clientHeight-c.default.findDOMNode(v.lv).parentNode.offsetTop;setTimeout((function(){w(v,t,0,!0)}),600),WorkHelper.saveLocalData({appCode:"aqyhsb",key:"workflowAction",value:"",success:function(e){},fail:function(e){alert(JSON.stringify(e))}})}setTimeout(M,500)},fail:function(e){alert(JSON.stringify(e))}})}var I=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.onEndReached=function(e){if(!n.state.isLoading||n.state.hasMore){n.setState({isLoading:!0});var t=document.documentElement.clientHeight-c.default.findDOMNode(n.lv).parentNode.offsetTop;h.addPageIndex(),setTimeout((function(){w(n,t,h.currentIndex,!1)}),500)}},n.onSelect=function(e){var t=n;if(n.setState({visible:!1,selected:e.props.value}),"refresh"==e.props.value){var a=document.documentElement.clientHeight-c.default.findDOMNode(t.lv).parentNode.offsetTop;setTimeout((function(){w(t,a,0,!0)}),600)}},n.handleVisibleChange=function(e){n.setState({visible:e})};var a=new r.default.DataSource({getRowData:function(e,t,n){return e[n]},rowHasChanged:function(e,t){return e!==t}});return n.state={dataSource:a,isLoading:!0,height:3*document.documentElement.clientHeight/4,visible:!1,selected:""},m=e.owner,v=n,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this,t=document.documentElement.clientHeight-c.default.findDOMNode(this.lv).parentNode.offsetTop;setTimeout((function(){w(e,t,e.props.tabIndex,!0)}),600),setTimeout(M,500)}},{key:"render",value:function(){var e=this;return l.default.createElement("div",null,l.default.createElement(a.default,{mode:"light",icon:l.default.createElement(o.default,{type:"left"}),onLeftClick:function(){return WorkHelper.closeApp({success:function(e){},fail:function(e){}})},rightContent:l.default.createElement(i.default,{overlayClassName:"fortest",overlayStyle:{color:"currentColor"},visible:this.state.visible,overlay:[l.default.createElement(y,{key:"1",value:"refresh",icon:l.default.createElement("img",{src:u.default,className:"am-icon am-icon-xs",alt:""}),"data-seed":"logId"},"刷新")],align:{overflow:{adjustY:0,adjustX:0},offset:[-10,0]},onVisibleChange:this.handleVisibleChange,onSelect:this.onSelect},l.default.createElement("div",{style:{height:"100%",padding:"0 15px",marginRight:"-15px",display:"flex",alignItems:"center"}},l.default.createElement(o.default,{type:"ellipsis"})))},"待办"),l.default.createElement(r.default,{ref:function(t){return e.lv=t},dataSource:this.state.dataSource,renderFooter:function(){return l.default.createElement("div",{style:{padding:30,textAlign:"center"}},e.state.isLoading?"正在加载":"加载完成")},renderRow:function(e,t,n){var a=h.getData(n);return a?l.default.createElement("div",{key:n,style:{padding:"0 15px"},className:"deal"},l.default.createElement("div",{style:{fontSize:16,border:"1px solid #94B5FF",borderRadius:6,marginBottom:12,padding:"12px 16px"},onClick:function(e){e.preventDefault(),WorkHelper.openApp({appCode:"aqyhsb",param:{startType:"4",url:f.workflowUrl+"manager/_wfhandler.html?nid="+a.id+"&wid="+a.workflow},success:function(e){},fail:function(e){alert(e)}})}},l.default.createElement("h1",null,a.title?a.title:"[草稿]"),l.default.createElement("p",null,l.default.createElement("span",{className:"type"},a.workflowName)),l.default.createElement("div",{className:"info"},l.default.createElement("span",{className:"icon iconfont"},""),a.username),l.default.createElement("div",{className:"date"},l.default.createElement("span",{className:"icon iconfont"},""),d.default.formatDateString(a.modifytime)),l.default.createElement("div",{className:"clearfix"}))):l.default.createElement("div",null,"error")},style:{height:this.state.height,overflow:"auto"},pageSize:4,scrollRenderAheadDistance:500,onEndReached:this.onEndReached,onEndReachedThreshold:10}))}}]),t}(l.default.Component);t.default=I},445:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="https://it.jisu8.cn:9999/workflowManager/";t.workflowUrl=a,t.ssoUrl="http://localhost:8101/sso/"},446:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(122),i=(a=r)&&a.__esModule?a:{default:a},s=n(445);i.default.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8";var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return o(e,null,[{key:"getNext",value:function(e){var t=this.sequences[e];return null==t?(this.sequences[e]=0,0):(t++,this.sequences[e]=t,t)}},{key:"contextUrl",value:function(){var e=document.location,t=e.pathname;return e.protocol+"//"+e.host+t.substring(0,t.indexOf("/",1))+"/"}},{key:"sendData",value:function(e){try{e||(e={});var t={url:this.contextUrl(),code:!1,method:!1,message:{},successFunc:function(){},errorFunc:function(e){alert(e)},isShowloading:!1,async:!0,isLogin:!1,postType:!1,encode:!1,notShowLogin:!1,notdata:!1},n=(t=Object.assign(t,e)).code,a=t.method,o=t.message,r=t.successFunc,s=t.errorFunc,l=(t.isShowloading,t.async,t.isLogin),c=(t.postType,t.encode),u=t.notShowLogin,d=t.url,f=t.notdata,p=void 0;if(!n)throw"senddata method's code parameter can't be null."+document.location;if(!a)throw"senddata method's method parameter can't be null."+document.location;var g=this.getNext("json");o?(p=JSON.stringify(o),p=c?"data="+encodeURIComponent(p):"data="+p):p="data=",f&&(p=o);var h=l?"get.login?":"get.data?";(0,i.default)({method:"post",url:""+d+h+"s="+g+"&c="+n+"&m="+a,data:p,headers:{"Content-type":"application/x-www-form-urlencoded;charset=UTF-8"},cancelToken:!!e.cancelToken&&e.cancelToken,withCredentials:!0,timeout:6e4}).then((function(e){var t=e.data;if(0==t.r)r(t.m);else if("-999"==t.r&&"login"==t.a){if(u)return void s(null,t.r,"功能异常，请联系系统管理员 "+t.m)}else s(null,t.r,"功能异常，请联系系统管理员 "+t.m)})).catch((function(e){s(e.message)}))}catch(e){alert(e)}}},{key:"getUpdateTime",value:function(e,t,n,a,o){var r=new URLSearchParams;r.append("dateType",e),"contractedAssistant"==t?"month"==e||"day"==e?(r.append("pageType","home"),r.append("deptId",a),r.append("roleCode","yyb_head")):"hour"==e&&(r.append("pageType","home"),r.append("channelCode","home002_2"),r.append("latnId",o),r.append("deptId",a),r.append("roleCode","yyb_head")):"gzzs_bqzhsh"==t&&("month"==e||"day"==e?(r.append("pageType","home"),r.append("deptId",a),r.append("roleCode","gzzs_qdjl")):"hour"==e&&(r.append("pageType","home"),r.append("channelCode","jrfz_city"),r.append("deptId",a),r.append("roleCode","gzzs_qdjl"))),(0,i.default)({method:"post",url:s.baseCbzsUrl+"client/channelAction!getUpdateDateInTheoryFromServer.msp",data:r}).then((function(e){return 1==e.data.retCode&&e.data.retResult})).then((function(e){n(e)})).catch((function(e){alert(e.message)}))}},{key:"jumpToApp",value:function(e,t,n){appService.startApp(e,n,(function(e){}),(function(e){showAlert("失败。"+e)}))}},{key:"checkTicket",value:function(e){var t=this;try{appService.getTicket((function(n){null==n?(alert("票据为空，请重新登录！"),t.closeApp()):e(n)}),(function(e){alert(e)}))}catch(e){alert(e)}}},{key:"closeApp",value:function(){appService.closeApp((function(){}),(function(){}))}},{key:"showMask",value:function(e){alert(e)}},{key:"upLoadFile",value:function(e){var t=e.url,n=e.file,a=e.fileVal,o=e.onBeforeSend,r=e.onProgress,i=e.onError,s=e.onSuccess,l=n.name,c=n.type,u=n.lastModifiedDate,d={name:l,type:c,size:"file"==e.type?n.size:n.base64.length,lastModifiedDate:u},f={};if(!1!==o(n,d,f)){r(n,0);var p=new FormData,g=new XMLHttpRequest;n.xhr=g,Object.keys(d).forEach((function(e){p.append(e,d[e])})),"file"==e.type?p.append(a,n,l):p.append(a,n.base64),g.onreadystatechange=function(){if(4==g.readyState)if(200==g.status)try{var e=JSON.parse(g.responseText);s(n,e)}catch(e){i(n,e)}else i(n,new Error("XMLHttpRequest response status is "+g.status))},g.upload.addEventListener("progress",(function(e){if(0!=e.total){var t=100*Math.ceil(e.loaded/e.total);r(n,t)}}),!1),g.open("POST",t),Object.keys(f).forEach((function(e){g.setRequestHeader(e,f[e])})),g.send(p)}}},{key:"formatDateString",value:function(t){if(t){var n=new Date,a=t.split(" "),o=a[0].split("-");if(n.setYear(o[0]),n.setMonth(o[1]-1),n.setDate(o[2]),a.length>1){var r=a[1].split(":");n.setHours(r[0]),n.setMinutes(r[1]),r.length>2?n.setSeconds(r[2]):n.setSeconds(0)}else n.setHours(0),n.setMinutes(0),n.setSeconds(0);return n.setMilliseconds(0),[e.padding((n.getMonth()+1).toString(),2,"0"),"-",e.padding(n.getDate().toString(),2,"0")," ",e.padding(n.getHours().toString(),2,"0"),":",e.padding(n.getMinutes().toString(),2,"0")]}return""}},{key:"padding",value:function(e,t,n){var a=t-e.length;if(a>0)for(var o=0;o<a;o++)e=n+e;return e}},{key:"urlHashInfo",value:function(){var e=window.location.href,t=e.indexOf("?"),n=e.substr(t,e.length-t),a={};if(n.length>1)for(var o=n.substr(1,n.length).split("&"),r=0;r<o.length;r++){t=o[r].indexOf("=");a[o[r].substr(0,t)]=o[r].substr(t+1,o[r].length-t)}return a}}]),e}();t.default=l,l.sequences=[]},447:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjI0cHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgdmVyc2lvbj0iMS4xIiBmaWxsPSIjMDAwMDAwIj4KICA8ZyBpZD0ic3VyZmFjZTkxOTI3MiI+CiAgICA8cGF0aCBzdHlsZT0iIHN0cm9rZTpub25lO2ZpbGwtcnVsZTpub256ZXJvO2ZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTsiIGQ9Ik0gNy4xNjAxNTYgMyBMIDguNzYxNzE5IDUgTCAxOCA1IEMgMTguNTUwNzgxIDUgMTkgNS40NDkyMTkgMTkgNiBMIDE5IDE1IEwgMTYgMTUgTCAyMCAyMCBMIDI0IDE1IEwgMjEgMTUgTCAyMSA2IEMgMjEgNC4zNDc2NTYgMTkuNjUyMzQ0IDMgMTggMyBaIE0gNCA0IEwgMCA5IEwgMyA5IEwgMyAxOCBDIDMgMTkuNjUyMzQ0IDQuMzQ3NjU2IDIxIDYgMjEgTCAxNi44Mzk4NDQgMjEgTCAxNS4yMzgyODEgMTkgTCA2IDE5IEMgNS40NDkyMTkgMTkgNSAxOC41NTA3ODEgNSAxOCBMIDUgOSBMIDggOSBaIE0gNCA0ICIvPgogIDwvZz4KPC9zdmc+Cg=="},448:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return a}));class a{constructor(){this.clear()}clear(){this.datas={},this.keys=[],this.currentIndex=0}pushData(e,t){this.datas[e]=t,this.keys.push(e)}getData(e){return this.datas[e]}addPageIndex(){this.currentIndex++}}}}]);